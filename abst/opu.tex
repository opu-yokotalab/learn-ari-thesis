\section{序論}
\label{sec:kanren}
\vspace{-1mm}
多くの情報系の大学や情報系企業の研修では，プログラミング言語の教育のためにC言語の教育を重視している．
初期段階のC言語学習では，概念の理解も重要であるが，実際にプログラムを作成させることが重要である．
しかし，学習者にやみくもにプログラムを作成させても，学習の方向性を持たないままプログラムを作成することが考えられ
知識の定着や概念の理解のサポートが出来るとは限らない．

このような問題を解決するために学習者に問題を出題し，解かせることで反復練習をさせる学習システムが多く開発されている．
これらの学習システムでは問題として，ソースコードを読む力をつけさせたり，プログラムの流れを追わせる力をつけさせるのに
有効だと考えられるため穴埋め問題が用いられている．

穴埋め問題を用いた学習システムとしては萩原らの記入式Web試験システムDrilLs-L\cite{c:D-L}，
玉木らのMAX/C\cite{c:MAX-C}，内田らのJavaDrill\cite{c:sakumon}などがある．

しかし，DrilLs-LやMAX/Cではデータベースへの登録やアルゴリズムの記述など，
新規に問題を作成するときに問題作成者に多くの負担がかかる．
JavaDrillでは，問題作成者の負荷については軽減されているが，
穴の位置がランダムに決まるために問題のレベルや出題範囲を制御しづらいという問題点がある．
さらに，これらのシステムでは間違えた問題を考慮した出題制御などはされておらず，
学習者ごとに対して適切な問題が出題されているとは限らないといった問題点もある．

%しかし，これらのシステムでは新規に問題を作成する時に問題作成者に多くの負担がかかるなどの問題がある．
そこで，本研究ではソースコードと問題作成意図を用いて自動的に穴埋め問題を作成する．
また，作成した問題を用いて反復学習を行うことが可能な学習システムを構築する．

%本稿では，2章で関連研究について述べ，問題点を挙げる．そして，3章で今回開発したシステムについて述べる．

%\vspace{-1mm}
%\section{関連研究}
%\label{sec:kanren}
%\vspace{-1mm}
%穴埋め問題を用いた学習システムとしては萩原らの記入式Web試験システムDrilLs-L\cite{c:D-L}，
%玉木らのMAX/C\cite{c:MAX-C}，内田らのJavaDrill\cite{c:sakumon}などがある．
%DrilLs-Lではデータベースに登録された大量の問題を用いて，簡単な出題指定を行うだけでドリル形式の繰り返し学習が行える．
%MAX/Cではアルゴリズムを用いて1つの問題から複数パターンの問題を出すことで繰り返し学習を行うシステムである．
%また，JavaDrillではJavaの学習を対象に，ソースコードを登録するだけで，ソースコード中の単語をランダムで
%穴に置き換え穴埋め問題を出題するシステムである．

%しかし，DrilLs-LやMAX/Cではデータベースへの登録やアルゴリズムの記述など，
%新規に問題を作成するときに問題作成者に多くの負担がかかる．
%JavaDrillでは，問題作成者の負荷については軽減されているが，
%穴の位置がランダムに決まるために問題のレベルや出題範囲を制御しづらいという問題点がある．
%さらに，これらのシステムでは間違えた問題を考慮した出題制御などはされておらず，
%学習者ごとに対して適切な問題が出題されているとは限らないといった問題点もある．

\vspace{-1mm}
\section{穴埋め問題を用いた学習システム}
\vspace{-1mm}
\label{sec:system}
今回開発した穴埋め問題を用いた学習システムでは\ref{sec:kanren}章で述べた問題点を解決するために
「問題の自動生成」，「自動出題」，「自動採点」の3つの機能を持つ．

\vspace{-1mm}
\subsection{問題の自動生成}
\vspace{-1mm}
問題作成者の負荷を軽減することと問題作成者の考え通りの問題が作成出来ることを目指し，
問題作成者の意図通りに穴埋め問題を自動生成するシステムを開発した．

本研究ではソースコードと問題作成意図を用いて，ソースコードを構文解析し，
問題作成意図を問題作成ルールに変換し構文木に適用することで穴埋め問題の自動生成を行う．
問題作成意図とは問題作成者がこんな問題を作りたいと考えていることを表現するためのものであり，
システムに登録してある問題作成意図を選択することでどのような問題を作成するか決定する．
問題作成意図は「入力関数の使い方が分かっているか」「変数がうまく定義できるか」などC言語学習初期段階の内容を扱い，
構文木のどの部分を穴に変えるかという問題作成ルールを組み合わせることで表現する．

問題の自動生成の流れを図\ref{fig:make_flow}に示す．

%%%%%%%%%%%%
%問題作成ルールは以下のような記述になり，構文木の部分木を指定し穴に変換する．
%\vspace{-1mm}
%\begin{center}
%{\bf createblank(節名,指定(,指定内容))}
%\end{center}
%\vspace{-1mm}
%%%%%%%%%%%%
%\vspace{-1mm}
\begin{figure}[htbp]
\begin{center}
\vspace{-1mm}
\includegraphics[height=5cm,width=7cm]{images/make_flow.eps}
\vspace{-10mm}
\caption{問題生成の流れ}
\vspace{-6mm}
\label{fig:make_flow}
\end{center}
\end{figure}

問題の自動生成では，問題作成者は問題の元となるソースコードをシステムに読み込ませる．
ソースコードをシステムに読み込ませると構文解析が行われ構文木に変換される．
続いて問題作成者は作りたい問題の内容を示す問題作成意図を選択し，どんな問題を出題したいのかを決定する．
システムでは，問題作成意図を対応した問題作成ルールに変換し，構文解析により作成した構文木に問題作成ルールを適用する．
その結果，自動的に穴埋め問題が作成される．生成される問題例を図\ref{fig:mon_rei}に示す．
生成された問題は出題機構で用いるために問題データベースに登録される．
また，問題生成時に作った構文木も模範解答として用いるため，後に述べる正規フォーマットに変換し，
XMLの形式で問題データベースに登録しておく．

%\vspace{-1mm}
\begin{figure}[htbp]
\begin{center}
\vspace{-5mm}
\includegraphics[height=5cm,width=5cm]{images/mon_rei.eps}
\vspace{-8mm}
\caption{生成される問題例}
\vspace{-6mm}
\label{fig:mon_rei}
\end{center}
\end{figure}

\vspace{-1mm}
\subsection{自動出題}
\vspace{-1mm}
出題では「関係性を用いた出題」，「形成的評価を用いた出題」，「総括的評価のための出題」の3つの出題法を組み合わせた出題を行う．
\begin{center}
\vspace{-1mm}
\begin{description}
\item[{\bf 関連性を用いた出題}] 
工学分野の教材が知識を蓄積していくことで学習が進んでいくという傾向があるため，
学習内容ごとの関連性をもとに，関連した問題ごとに順序をつけ，それに沿って出題を行う．
\vspace{-2mm}
\item[{\bf 形成的評価を用いた出題}] 
問題を解くごとに逐次評価を行い，次に出題する問題のレベルを変えたり，連続で間違いをした学習者を強制的に復習をさせれるようにする．
\vspace{-2mm}
\item[{\bf 総括的評価のための出題}] 
単元の最後にこれまでの正解率をもとに学習目標と現在の能力の差を判断する．
もし、その時点で学習目標まで能力が達していなかった場合，復習を行わせることが可能となる．
\end{description}
\vspace{-2mm}
\end{center}

本研究では，これらの出題法を組み合わせた独自の出題法を用いる．出題の流れを図\ref{fig:take_flow}に示す．
問題は分野ごとにレベルの低い問題から出題されていき，1問解くごとに評価を行いレベルの変更を行う．
規定の問題数を解くと総括的評価が行われ，修了か復習かの判断がされる．
また，低いレベルで連続で間違えた場合には，強制的に復習をさせるようになっている．
\vspace{-1mm}
\begin{figure}[htbp]
\begin{center}
\vspace{-3mm}
\includegraphics[height=4.5cm,width=7cm]{images/take_flow.eps}
\vspace{-11mm}
\caption{出題の流れ}
\vspace{-6mm}
\label{fig:take_flow}
\end{center}
\end{figure}

\vspace{-1mm}
\subsection{自動採点}
\vspace{-1mm}
穴埋め問題の穴を大きくした場合，採点を行う時にプログラムによっては複数の解答が考えられるものがある．
その場合，問題作成時に複数の解答を手動で登録してもらっており問題作成者の負荷になっていた．
また，複数解答が手動で登録されているため，考えうる解答パターンが多くある場合に登録し忘れるといった問題点も考えられる．

本研究ではこのような複数パターンの解答がある問題に対応するために，
「対応テーブルによる変数の比較」，「正規フォーマットへの変換」，「構文木同士の比較」といった3段階の過程で採点を行う．

\begin{center}
\vspace{-1mm}
\begin{description}
\item[{\bf 対応テーブルによる変数の比較}] 
変数名がすべて穴になっているような問題を想定していて，
このような問題では変数の制約関係が正しければ変数名がどんな名前でも正解となるので，そういった状況でも正解とすることが出来るようにする．
\vspace{-6mm}
\item[{\bf 正規フォーマットへの変換}] 
異なる記法で同一の処理を表すコードに対応する．$c(a+b)$と$a*c+b*c$が同じ動作を表す分配律
などについて統一のフォーマットを決めておき，そのフォーマットに従い採点時に変換することでより柔軟な採点を行う．
\vspace{-6mm}
\item[{\bf 構文木同士の比較}] 
構文木を比較することにより，構造的は差異を見つけ出す．
\end{description}
\vspace{-2mm}
\end{center}

採点の流れを図\ref{fig:answer_flow}に示す．
\vspace{-1mm}
\begin{figure}[htbp]
\begin{center}
\vspace{-2mm}
\includegraphics[height=4.5cm,width=7cm]{images/answer_flow.eps}
\vspace{-7mm}
\caption{採点の流れ}
\vspace{-6mm}
\label{fig:answer_flow}
\end{center}
\end{figure}

\vspace{-1mm}
\subsection{システム全体像}
\vspace{-1mm}
図\ref{fig:system_all}にC言語穴埋め問題を用いた学習システムの全体像を示す．
本システムは大きく分けて，問題の自動生成部と出題・採点部に分かれている．
問題の自動生成部で作った問題は問題データベースに蓄積され，
出題・採点部は問題データベースから問題を呼び出すことで出題を行う．
%\vspace{-1mm}
\begin{figure}[htbp]
\begin{center}
\vspace{-3mm}
\includegraphics[height=5cm,width=7cm]{images/system_all.eps}
\vspace{-8mm}
\caption{システムの全体像}
\vspace{-6mm}
\label{fig:system_all}
\end{center}
\end{figure}

\vspace{-2mm}
\section{実装}
\vspace{-2mm}
\ref{sec:system}章で述べた提案内容について，問題の自動生成機能や自動出題機能の実装を行った．
各機能は様々なOS上で動かすことを想定して，Javaを用いて実装した．さらに問題データベースはPostgreSQLを用いた．
自動出題機能の動作例を図\ref{fig:take_question}に示す．
そして，実装した自動出題機能を用いて，出題方法の評価を行い有用性が示された．
%\vspace{-1mm}
\begin{figure}[htbp]
\begin{center}
%\vspace{-1mm}
\includegraphics[height=5.5cm,width=7cm]{images/take_question.eps}
\vspace{-7mm}
\caption{動作例}
\vspace{-6mm}
\label{fig:take_question}
\end{center}
\end{figure}

\vspace{-1mm}
\section{結論と今後の課題}
\vspace{-1mm}
本研究では，穴埋め問題を用いたドリル形式で出題・採点を行う学習システムの提案と実装を行った．
さらに，問題作成の負荷を軽減するための問題の自動生成機能の開発も行った．
今後の課題としては，さらなる評価と改善を行うためにシステム全体での評価実験を行うことなどが挙げられる．

%\vspace{-1mm}
\begin{thebibliography}{10}
\vspace{-1mm}
\bibitem{c:D-L}
萩原秀和，富永浩之，松原行宏，山崎敏範，
''ドリル練習に基づくWeb型試験システム-情報基礎科目への応用と運用試験-，''
信学技報， vol.102, no.388, ET2002, pp.57-62,  2002.
\vspace{-1mm}
\bibitem{c:MAX-C}
玉木久夫，疋田輝雄，井口幸洋，小島崇輝，早川智一，
''MAX/C：WEB上のCプログラミング実習システム，''
全国大学IT活用教育方法研究発表会，E-10.
\vspace{-1mm}
\bibitem{c:sakumon}
内田保雄,
''初級プログラミング学習のための自動作問システム,''
情報処理学会研究報告, Vol.2007, No.123(20071207) pp. 109-113 2007-CE-92-(16).

\end{thebibliography}

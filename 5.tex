\section{自動採点}
\subsection{採点上の問題点}
\label{sec:sai_mon}
穴埋め問題の穴を大きくした場合，プログラムによっては複数の解答が考えられるものがある．
これは，C言語では違う記法で同じ動作を書くことができるために，学習者のプログラミングの書き方や知識の違いから起こる．
そういった解答に対してADELのテスト機構\cite{c:test}では，複数の解答を問題作成時に問題作成者に登録してもらうことで対応してきた．
さらに，自動生成システム\cite{c:ikeda}においても複数パターンの解答がある場合には問題作成者に手動で登録してもらうという手法をとっていた．
しかし，この手法では解答のパターンが多く考えうる場合，すべてのパターンに対して解答を登録してもらうことは問題作成者に大変多くの負担がかかっていた．
また，問題作成者任せで複数パターンの解答に対応していると問題作成者が登録し忘れた場合，回答自体は正解なのんに不正解になるといったことが起こりうる．
これでは，問題ごとに採点基準が異なってしまう危険性が考えられる．

\begin{figure}[htbp]
\begin{center}
\includegraphics[width=10cm,height=5cm]{image/wrong_write.eps}
\vspace{-2mm}
\caption{違う記法で同じ動作のプログラム例}
\label{fig:wrong_write}
\end{center}
\vspace{-5mm}
\end{figure}

\subsection{採点手法}
そこで，\ref{sec:sai_mon}節で述べた問題点について対応した採点手法について述べる．
採点機構では，「対応テーブルによる変数の比較」，「正規フォーマットへの変換」，「構文木どうしの比較」といった3段階の流れで採点を行う．
\\
学習者が解答してできたソースを構文解析し構文木の作成を行う．そして,問題作成時に作成した構文木と比較を行う．
また，変数の位置をすべて穴をあけた場合は問題リソース作成時につけたidをもとに，記号表により，
学習者が入力した文字が問題作成者の意図した文字列でなくても，必要な場所にすべて同じ文字列が入っていた場合正解とする

\subsubsection{対応テーブルによる変数の比較}
構文解析を行うときに変数にidをつける．
変数の宣言部を解析時にそれぞれの変数にidをふり，変数の対応テーブルを作成する．
処理部分に変数が出てきた場合，そのノードのidを対応テーブルに書き込む．

\subsubsection{正規フォーマットへの統一}
違う記法で似た動作を行うコードに対して，ある1つの記法に統一を行う．
今回対応したのは「繰り返し構文」，「分配法則」，「結合法則」である．

\subsubsection{構文木の比較}
2つの構文木の比較を行う．深さ優先にノードを比較していき
ルートノードから順に対応するノードを決定していく．
対応しないノードが現れた場合，そこを間違いとして学習者に提示する．


\newpage
%-------------------------------------------------------------------
%まず，変数を
%正規化機構で正規フォーマットに変換する．そして構文木の比較機構
%に正規フォーマットに統一された構文木を